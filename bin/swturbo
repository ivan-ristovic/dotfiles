#!/bin/bash

PSTATE_PATH=/sys/devices/system/cpu/intel_pstate/no_turbo
BOOST_PATH=/sys/devices/system/cpu/cpufreq/boost

function swap_value () 
{
    VAL=$(<${@})
    NEW_VAL=$((($VAL + 1) % 2))
    echo ${@}
    echo ${NEW_VAL} | sudo tee ${@}
}

if [[ ! -f ${PSTATE_PATH} ]]; then
    echo 'fatal: intel_pstate/no_turbo missing'
    if [[ ! -f ${BOOST_PATH} ]]; then
        echo 'fatal: cpufreq/boost missing'
        exit 1
    else
        swap_value $BOOST_PATH 
    fi
else
    swap_value $PSTATE_PATH
fi

