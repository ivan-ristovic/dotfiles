#!/bin/bash

. include lib

assert::argc_ge $# 1 "[path/to/pub/key] user@server"

function get_key_path () 
{
    echo "${1:-$HOME/.ssh/id.pub}"
}

if [ $# -ge 2 ]; then
    dst="$2"
    key=$(get_key_path "$1")
else
    dst="$1"
    key=$(get_key_path)
fi

set -e;
ssh-copy-id -i "$key" "$dst"
log::suc "Done!"
